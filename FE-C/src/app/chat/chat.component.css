/* --- Global Styles --- */
html,
body {
  margin: 0;
  padding: 0;
  height: 100%;
  font-family: "Inter", sans-serif;
  overflow: hidden; /* Prevent overall body scrolling */
}

.messenger-app {
  display: flex;
  height: 100vh; /* Full viewport height */
  overflow: hidden; /* Ensures content inside doesn't cause overflow */
  background-color: #f0f2f5;
}

/* --- Left Navigation (aside.left-nav) --- */
.left-nav {
  width: 70px; /* Fixed width for the left sidebar */
  background-color: #2c3e50;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding-top: 20px;
  box-shadow: 2px 0 5px rgba(0, 0, 0, 0.1);
  z-index: 10; /* Ensure it's above sliding panels */
}

.nav-logo {
  margin-bottom: 30px;
}
.nav-logo svg {
  width: 48px;
  height: 48px;
}

.nav-icons {
  display: flex;
  flex-direction: column;
  gap: 25px; /* Space between navigation buttons */
  flex-grow: 1; /* Pushes footer to the bottom */
}

.nav-btn {
  background: none;
  border: none;
  font-size: 1.5rem;
  color: #aeb4be; /* Lighter grey for inactive icons */
  cursor: pointer;
  padding: 10px;
  border-radius: 8px;
  transition: color 0.2s ease, background-color 0.2s ease;
}

.nav-btn:hover,
.nav-btn.active {
  /* Add .active class when a button is selected/active */
  color: #007bff; /* Blue for active/hover */
  background-color: #3d506a; /* Darker background on hover/active */
}

.nav-footer {
  padding-bottom: 20px;
}

.user-avatar-small img {
  width: 44px;
  height: 44px;
  border-radius: 50%;
  object-fit: cover;
  border: 2px solid #007bff;
  cursor: pointer;
  transition: transform 0.2s ease;
}
.user-avatar-small img:hover {
  transform: scale(1.05);
}

/* --- Sliding Panel Base Styles (Search, Notification, Friends, Profile) --- */
.search-panel-wrapper,
.notification-panel-wrapper,
.friends-panel-wrapper,
.profile-panel-wrapper {
  position: absolute; /* Position relative to .messenger-app (or nearest positioned ancestor) */
  top: 0;
  bottom: 0;
  left: 0px; /* Starts just after the left-nav */
  width: 350px; /* Width of the sliding panel */
  background-color: #ffffff;
  box-shadow: 5px 0 15px rgba(0, 0, 0, 0.1);
  transform: translateX(
    -100%
  ); /* Initially hide by moving left by its full width */
  transition: transform 0.3s ease-out;
  z-index: 20; /* Ensure these panels are above chat content but below overlay */
  display: flex;
  flex-direction: column;
  overflow: hidden; /* Keep content within bounds */
}

.search-panel-wrapper.open,
.notification-panel-wrapper.open,
.friends-panel-wrapper.open,
.profile-panel-wrapper.open {
  transform: translateX(0); /* Slide in */
  height: 665px; /* Ensure it takes full height of the parent */
}

.close-panel-btn {
  position: absolute;
  top: 15px;
  right: 15px;
  background: none;
  border: none;
  font-size: 1.5rem;
  color: #666;
  cursor: pointer;
  z-index: 1; /* Ensure close button is clickable */
}

.search-content,
.notification-content,
.friends-content,
.profile-content {
  flex-grow: 1; /* Takes remaining space within panel wrapper */
  padding: 20px;
  overflow-y: auto; /* Allow scrolling for content inside panels */
}

.search-header,
.notification-header,
.friends-header,
.profile-header {
  font-size: 1.8rem;
  font-weight: 700;
  color: #333;
  margin-bottom: 20px;
  text-align: center;
}

/* --- Search Panel Specific Styles --- */
.search-input-container {
  display: flex;
  gap: 10px;
  margin-bottom: 20px;
}
.search-input {
  flex-grow: 1;
  padding: 10px 15px;
  border: 1px solid #ddd;
  border-radius: 25px;
  font-size: 1rem;
}
.search-btn {
  background-color: #007bff;
  color: white;
  border: none;
  border-radius: 25px;
  padding: 10px 15px;
  cursor: pointer;
  font-size: 1rem;
}
.search-result-card {
  background-color: #f8f9fa;
  border: 1px solid #eee;
  border-radius: 10px;
  padding: 15px;
  margin-top: 15px;
}
.search-result-header {
  display: flex;
  align-items: center;
  gap: 15px;
  margin-bottom: 15px;
}
.search-result-avatar {
  width: 60px;
  height: 60px;
  border-radius: 50%;
  object-fit: cover;
}
.search-result-info {
  display: flex;
  flex-direction: column;
}
.search-result-name {
  font-weight: 600;
  font-size: 1.1rem;
}
.search-result-friends {
  font-size: 0.9rem;
  color: #777;
}
.search-result-id-btn {
  background-color: #e9ecef;
  color: #555;
  border: none;
  border-radius: 5px;
  padding: 5px 8px;
  font-size: 0.8rem;
  margin-top: 5px;
  cursor: pointer;
}
.search-result-actions {
  display: flex;
  flex-direction: column;
  gap: 10px;
}
.action-btn {
  padding: 10px 15px;
  border-radius: 8px;
  border: none;
  cursor: pointer;
  font-weight: 500;
  transition: background-color 0.2s ease;
}
.primary-btn {
  background-color: #007bff;
  color: white;
}
.primary-btn:hover {
  background-color: #0056b3;
}
.message-user-section {
  display: flex;
  gap: 10px;
  margin-top: 10px;
}
.message-input {
  flex-grow: 1;
  padding: 8px 12px;
  border: 1px solid #ddd;
  border-radius: 20px;
}
.send-message-btn {
  background-color: #28a745;
  color: white;
}
.send-message-btn:hover {
  background-color: #218838;
}
.search-message.error {
  color: #dc3545;
  margin-top: 10px;
}
.search-message.success {
  color: #28a745;
  margin-top: 10px;
}

/* --- Notification Panel Specific Styles --- */
.notification-list {
  list-style: none;
  padding: 0;
  margin: 0;
}
.notification-item {
  display: flex;
  flex-direction: column;
  padding: 15px 0;
  border-bottom: 1px solid #eee;
}
.notification-item:last-child {
  border-bottom: none;
}
.notification-details {
  display: flex;
  flex-wrap: wrap; /* Allows items to wrap on smaller screens */
  align-items: center;
  gap: 8px;
  margin-bottom: 10px;
}
.notification-user-info {
  display: flex;
  align-items: center;
  gap: 8px;
}
.notification-username {
  font-weight: 600;
  color: #333;
}
.notification-action-text {
  color: #555;
  font-size: 0.95rem;
}
.notification-meta {
  font-size: 0.85rem;
  color: #777;
  margin-top: 5px;
  line-height: 1.4;
}
.notification-actions {
  display: flex;
  gap: 10px;
  margin-top: 10px;
}
.accept-btn {
  background-color: #28a745;
  color: white;
}
.accept-btn:hover {
  background-color: #218838;
}
.decline-btn {
  background-color: #dc3545;
  color: white;
}
.decline-btn:hover {
  background-color: #c82333;
}
.notification-message.error {
  color: #dc3545;
  text-align: center;
  padding: 15px;
}
.notification-message.empty {
  color: #777;
  text-align: center;
  padding: 15px;
}

/* --- Friends Panel Specific Styles --- */
.friends-list {
  list-style: none;
  padding: 0;
  margin: 0;
}
.friend-item {
  display: flex;
  align-items: center;
  padding: 10px 0;
  gap: 15px;
  border-bottom: 1px solid #eee;
  cursor: pointer;
}
.friend-item:last-child {
  border-bottom: none;
}
.friend-avatar {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  object-fit: cover;
}
.friend-name {
  font-weight: 500;
  color: #333;
}
.friends-message.error,
.friends-message.empty {
  text-align: center;
  padding: 15px;
  color: #777;
}

/* --- Profile Panel Specific Styles --- */
.profile-content {
  flex-grow: 1;
  display: flex;
  flex-direction: column;
  align-items: center; /* Centers content horizontally */
  padding-top: 20px;
  overflow-y: auto; /* Enable scrolling if content overflows */
  text-align: center;
}

.profile-pic-container {
  width: 150px;
  /* Removed height: 150px; as discussed previously to allow button to be visible */
  margin-bottom: 30px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 15px;
}

.profile-pic {
  width: 150px;
  height: 150px;
  border-radius: 50%;
  object-fit: cover;
  border: 4px solid #007bff;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
}

.set-pfp-btn {
  background-color: #6c757d;
  color: white;
  border: none;
  padding: 10px 20px;
  border-radius: 25px;
  font-size: 0.95rem;
  font-weight: 500;
  cursor: pointer;
  transition: background-color 0.2s ease, transform 0.1s ease;
  white-space: nowrap;
}
.set-pfp-btn:hover {
  background-color: #5a6268;
  transform: translateY(-2px);
}

.profile-info {
  width: 100%;
  max-width: 300px;
  margin-bottom: 30px;
  background-color: #f0f2f5;
  border-radius: 12px;
  padding: 20px;
  box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.05);
  display: flex;
  flex-direction: column;
  gap: 12px;
  text-align: left; /* Align text within info box to left */
}
.profile-info div strong {
  color: #007bff; /* Blue for labels like "Name:", "User ID:" */
}
.profile-message.error {
  color: #dc3545;
  margin-bottom: 15px;
}

/* Post Form Styles in Profile Panel */
.profile-content form {
  width: 100%;
  max-width: 300px;
  margin-top: 20px;
  padding: 20px;
  background-color: #f8f9fa;
  border-radius: 12px;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
  text-align: left;
}
.profile-content .form-group {
  margin-bottom: 15px;
}
.profile-content label {
  display: block;
  margin-bottom: 5px;
  font-weight: 600;
  color: #555;
}
.profile-content input[type="text"],
.profile-content input[type="file"] {
  width: calc(100% - 20px);
  padding: 10px;
  border: 1px solid #ddd;
  border-radius: 8px;
  font-size: 1rem;
}
.profile-content button[type="submit"] {
  width: 100%;
  padding: 12px;
  background-color: #007bff;
  color: white;
  border: none;
  border-radius: 8px;
  font-size: 1rem;
  cursor: pointer;
  transition: background-color 0.2s ease;
}
.profile-content button[type="submit"]:disabled {
  background-color: #a0c9ed;
  cursor: not-allowed;
}
.profile-content .message {
  margin-top: 10px;
  font-size: 0.9rem;
  color: #28a745;
}

/* --- Chat List Panel (section.chat-list-panel) --- */
.chat-list-panel {
  width: 350px; /* Fixed width for the chat list */
  background-color: #ffffff;
  border-right: 1px solid #e0e0e0;
  display: flex;
  flex-direction: column;
  overflow: hidden; /* Prevent this section from causing overflow */
}

.chat-list-header {
  padding: 20px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-bottom: 1px solid #eee;
}
.chat-list-header h2 {
  margin: 0;
  font-size: 1.8rem;
  font-weight: 700;
  color: #333;
}
.header-actions .icon-btn {
  background: none;
  border: none;
  font-size: 1.3rem;
  color: #666;
  cursor: pointer;
  margin-left: 10px;
}
.header-actions .icon-btn:hover {
  color: #007bff;
}

.search-bar {
  display: flex;
  align-items: center;
  padding: 15px 20px;
  background-color: #f8f9fa;
  border-bottom: 1px solid #eee;
}
.search-bar i {
  color: #999;
  margin-right: 10px;
}
.search-bar input {
  flex-grow: 1;
  border: none;
  background: none;
  padding: 8px 0;
  font-size: 1rem;
  outline: none;
}
.search-bar input::placeholder {
  color: #aaa;
}

.chat-conversations {
  flex-grow: 1;
  list-style: none;
  padding: 0;
  margin: 0;
  overflow-y: auto; /* Allow scrolling for the conversation list */
}

.chat-item {
  display: flex;
  align-items: center;
  padding: 15px 20px;
  gap: 15px;
  border-bottom: 1px solid #f5f5f5;
  cursor: pointer;
  transition: background-color 0.2s ease;
}
.chat-item:hover,
.chat-item.active {
  background-color: #e9ecef;
}
.chat-avatar img {
  width: 50px;
  height: 50px;
  border-radius: 50%;
  object-fit: cover;
}
.chat-info {
  flex-grow: 1;
}
.chat-name {
  font-weight: 600;
  color: #333;
  font-size: 1rem;
}
.last-message {
  font-size: 0.9rem;
  color: #777;
}
.chat-meta .time {
  font-size: 0.8rem;
  color: #008000; /* Active status */
}

/* --- Main Chat Area (Holds the dynamically switched content) --- */
.main-chat-area {
  flex-grow: 1; /* Takes up all remaining horizontal space */
  display: flex; /* Use flex to manage its children (chat-interface-content & insta-main) */
  position: relative; /* Crucial for absolute positioning of children */
  overflow: hidden; /* Hides any overflow from its children */
  height: 100%; /* Ensures it fills its parent height */
  background-color: #f8f9fa; /* Default background */
}

/* --- Chat Interface Content (The actual chat messages display) --- */
.chat-interface-content {
  position: absolute; /* Overlaps with insta-main */
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  background-color: #f8f9fa; /* Background for chat content */
  overflow: hidden; /* Manages its own scrolling */
  transition: opacity 0.3s ease; /* Smooth transition for visibility toggle */
}

/* .chat-interface-content will be hidden by *ngIf="!homePage" */

.chat-area-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 15px 20px;
  background-color: #ffffff;
  border-bottom: 1px solid #eee;
  flex-shrink: 0; /* Prevents header from shrinking */
}
.chat-partner-info {
  display: flex;
  align-items: center;
  gap: 15px;
}
.chat-partner-name {
  font-weight: 600;
  font-size: 1.1rem;
  color: #333;
}
.chat-partner-status {
  font-size: 0.85rem;
  color: #008000;
}
.chat-messages {
  flex-grow: 1; /* Allows messages to fill vertical space */
  overflow-y: auto; /* Enables scrolling for messages */
  padding: 20px;
  display: flex;
  flex-direction: column;
  gap: 10px;
  background-color: #e9ecef; /* Light grey background for message area */
}

.message-bubble {
  display: flex;
  align-items: flex-end; /* Align avatar/time with bottom of bubble */
  max-width: 70%;
}
.message-bubble.sent {
  align-self: flex-end; /* Align sent messages to the right */
  flex-direction: row-reverse; /* Put time/avatar on the right */
}
.message-bubble.received {
  align-self: flex-start; /* Align received messages to the left */
  flex-direction: row; /* Put time/avatar on the left */
}
.message-content {
  padding: 10px 15px;
  border-radius: 18px;
  word-wrap: break-word;
  color: white;
  font-size: 0.95rem;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}
.message-bubble.sent .message-content {
  background-color: #007bff;
}
.message-bubble.received .message-content {
  background-color: #e4e6eb;
  color: #333;
}
.message-sender-avatar img {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  object-fit: cover;
  margin: 0 8px; /* Space around avatar */
}
.message-time {
  font-size: 0.75rem;
  color: #999;
  margin: 0 8px; /* Space around time */
  align-self: flex-end; /* Align time with bottom of bubble */
}

.chat-input-area {
  flex-shrink: 0; /* Prevents input area from shrinking */
  display: flex;
  align-items: center;
  padding: 15px 20px;
  background-color: #ffffff;
  border-top: 1px solid #eee;
  gap: 10px;
}
.message-input-wrapper {
  flex-grow: 1;
  display: flex;
  align-items: center;
  background-color: #f0f2f5;
  border-radius: 25px;
  padding: 5px 15px;
}
.message-input-wrapper input {
  flex-grow: 1;
  border: none;
  background: none;
  outline: none;
  padding: 8px 0;
  font-size: 1rem;
}
.emoji-btn {
  margin-left: 10px;
}
.chat-input-area .icon-btn {
  background: none;
  border: none;
  font-size: 1.3rem;
  color: #666;
  cursor: pointer;
}
.chat-input-area .icon-btn:hover {
  color: #007bff;
}
.chat-input-area .icon-btn.fas.fa-paper-plane {
  color: #007bff; /* Blue send button */
}

/* --- Homepage (Instagram-like Feed) Styles --- */
.insta-main {
  position: absolute; /* Overlaps with chat-interface-content */
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  background-color: #f8f9fa; /* Consistent background */
  overflow-y: auto; /* Allows scrolling for the posts within this container */
  padding: 20px 0; /* Vertical padding for content */
  box-sizing: border-box; /* Include padding in height calculation */
  transition: opacity 0.3s ease; /* Smooth transition for visibility toggle */
}

/* --- Posts Section --- */
.insta-posts {
  width: 100%;
  max-width: 500px; /* Common for social feeds to have a max width */
  display: flex;
  flex-direction: column;
  gap: 25px; /* Space between individual posts */
}

/* --- Individual Post --- */
.insta-post {
  background-color: #ffffff;
  border: 1px solid #e0e0e0;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
  overflow: hidden;
  padding-bottom: 15px;
}

.post-header {
  display: flex;
  align-items: center;
  padding: 15px;
  gap: 10px;
  border-bottom: 1px solid #f0f0f0;
}

.post-user-pic {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  object-fit: cover;
  border: 1px solid #ddd;
}

.post-username {
  font-weight: 600;
  color: #333;
  font-size: 1rem;
}

.post-img {
  width: 100%;
  height: auto;
  display: block;
  max-height: 500px;
  object-fit: contain;
  background-color: #eee;
}

.post-actions {
  display: flex;
  align-items: center;
  gap: 20px;
  padding: 15px;
  font-size: 1.2rem;
  color: #555;
}

.like-button {
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 5px;
  color: #e74c3c;
  font-size: 1.5rem;
  transition: transform 0.1s ease;
}

.like-button:hover {
  transform: scale(1.1);
}

.like-button span {
  font-size: 1rem;
  color: #333;
  font-weight: 500;
}

.post-actions svg {
  width: 28px;
  height: 28px;
  cursor: pointer;
  transition: transform 0.1s ease, color 0.2s ease;
  color: #666;
}

.post-actions svg:hover {
  transform: translateY(-2px);
  color: #007bff;
}

.post-caption {
  padding: 0 15px 10px 15px;
  font-size: 0.95rem;
  color: #444;
  line-height: 1.4;
}

.post-time {
  padding: 0 15px 0 15px;
  font-size: 0.8rem;
  color: #888;
}

/* --- Loading/Empty Messages --- */
.loading-indicator,
.empty-message {
  text-align: center;
  padding: 20px;
  color: #666;
  font-size: 1.1rem;
}

.error-message {
  color: #e74c3c;
  font-size: 0.85rem;
  margin-left: 10px;
}
